(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.WebSocketRails=function(){function e(e,i){this.url=e,this.use_websockets=null!=i?i:!0,this.connection_stale=t(this.connection_stale,this),this.pong=t(this.pong,this),this.supports_websockets=t(this.supports_websockets,this),this.dispatch_channel=t(this.dispatch_channel,this),this.unsubscribe=t(this.unsubscribe,this),this.subscribe_private=t(this.subscribe_private,this),this.subscribe=t(this.subscribe,this),this.dispatch=t(this.dispatch,this),this.trigger_event=t(this.trigger_event,this),this.trigger=t(this.trigger,this),this.bind=t(this.bind,this),this.connection_established=t(this.connection_established,this),this.new_message=t(this.new_message,this),this.reconnect=t(this.reconnect,this),this.callbacks={},this.channels={},this.queue={},this.connect()}return e.prototype.connect=function(){return this.state="connecting",this._conn=this.supports_websockets()&&this.use_websockets?new e.WebSocketConnection(this.url,this):new e.HttpConnection(this.url,this),this._conn.new_message=this.new_message},e.prototype.disconnect=function(){return this._conn&&(this._conn.close(),delete this._conn._conn,delete this._conn),this.state="disconnected"},e.prototype.reconnect=function(){var t,e,i,a,n;i=null!=(a=this._conn)?a.connection_id:void 0,this.disconnect(),this.connect(),n=this.queue;for(e in n)t=n[e],t.connection_id!==i||t.is_result()||this.trigger_event(t);return this.reconnect_channels()},e.prototype.new_message=function(t){var i,a,n,r,s,o;for(o=[],n=0,r=t.length;r>n;n++)a=t[n],i=new e.Event(a),i.is_result()?(null!=(s=this.queue[i.id])&&s.run_callbacks(i.success,i.data),delete this.queue[i.id]):i.is_channel()?this.dispatch_channel(i):i.is_ping()?this.pong():this.dispatch(i),o.push("connecting"===this.state&&"client_connected"===i.name?this.connection_established(i.data):void 0);return o},e.prototype.connection_established=function(t){return this.state="connected",this._conn.setConnectionId(t.connection_id),this._conn.flush_queue(),null!=this.on_open?this.on_open(t):void 0},e.prototype.bind=function(t,e){var i;return null==(i=this.callbacks)[t]&&(i[t]=[]),this.callbacks[t].push(e)},e.prototype.trigger=function(t,i,a,n){var r,s;return r=new e.Event([t,i,null!=(s=this._conn)?s.connection_id:void 0],a,n),this.trigger_event(r)},e.prototype.trigger_event=function(t){var e,i;return null==(e=this.queue)[i=t.id]&&(e[i]=t),this._conn&&this._conn.trigger(t),t},e.prototype.dispatch=function(t){var e,i,a,n,r;if(null!=this.callbacks[t.name]){for(n=this.callbacks[t.name],r=[],i=0,a=n.length;a>i;i++)e=n[i],r.push(e(t.data));return r}},e.prototype.subscribe=function(t,i,a){var n;return null==this.channels[t]?(n=new e.Channel(t,this,!1,i,a),this.channels[t]=n,n):this.channels[t]},e.prototype.subscribe_private=function(t,i,a){var n;return null==this.channels[t]?(n=new e.Channel(t,this,!0,i,a),this.channels[t]=n,n):this.channels[t]},e.prototype.unsubscribe=function(t){return null!=this.channels[t]?(this.channels[t].destroy(),delete this.channels[t]):void 0},e.prototype.dispatch_channel=function(t){return null!=this.channels[t.channel]?this.channels[t.channel].dispatch(t.name,t.data):void 0},e.prototype.supports_websockets=function(){return"function"==typeof WebSocket||"object"==typeof WebSocket},e.prototype.pong=function(){var t,i;return t=new e.Event(["websocket_rails.pong",{},null!=(i=this._conn)?i.connection_id:void 0]),this._conn.trigger(t)},e.prototype.connection_stale=function(){return"connected"!==this.state},e.prototype.reconnect_channels=function(){var t,e,i,a,n;a=this.channels,n=[];for(i in a)e=a[i],t=e._callbacks,e.destroy(),delete this.channels[i],e=e.is_private?this.subscribe_private(i):this.subscribe(i),e._callbacks=t,n.push(e);return n},e}()}).call(this),function(){WebSocketRails.Event=function(){function t(t,e,i){var a;this.success_callback=e,this.failure_callback=i,this.name=t[0],a=t[1],null!=a&&(this.id=null!=a.id?a.id:65536*(1+Math.random())|0,this.channel=null!=a.channel?a.channel:void 0,this.data=null!=a.data?a.data:a,this.token=null!=a.token?a.token:void 0,this.connection_id=t[2],null!=a.success&&(this.result=!0,this.success=a.success))}return t.prototype.is_channel=function(){return null!=this.channel},t.prototype.is_result=function(){return"undefined"!=typeof this.result},t.prototype.is_ping=function(){return"websocket_rails.ping"===this.name},t.prototype.serialize=function(){return JSON.stringify([this.name,this.attributes()])},t.prototype.attributes=function(){return{id:this.id,channel:this.channel,data:this.data,token:this.token}},t.prototype.run_callbacks=function(t,e){return this.success=t,this.result=e,this.success===!0?"function"==typeof this.success_callback?this.success_callback(this.result):void 0:"function"==typeof this.failure_callback?this.failure_callback(this.result):void 0},t}()}.call(this),function(){WebSocketRails.AbstractConnection=function(){function t(t,e){this.dispatcher=e,this.message_queue=[]}return t.prototype.close=function(){},t.prototype.trigger=function(t){return"connected"!==this.dispatcher.state?this.message_queue.push(t):this.send_event(t)},t.prototype.send_event=function(t){return null!=this.connection_id?t.connection_id=this.connection_id:void 0},t.prototype.on_close=function(t){var e;return this.dispatcher&&this.dispatcher._conn===this?(e=new WebSocketRails.Event(["connection_closed",t]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(e)):void 0},t.prototype.on_error=function(t){var e;return this.dispatcher&&this.dispatcher._conn===this?(e=new WebSocketRails.Event(["connection_error",t]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(e)):void 0},t.prototype.on_message=function(t){return this.dispatcher&&this.dispatcher._conn===this?this.dispatcher.new_message(t):void 0},t.prototype.setConnectionId=function(t){this.connection_id=t},t.prototype.flush_queue=function(){var t,e,i,a;for(a=this.message_queue,e=0,i=a.length;i>e;e++)t=a[e],this.trigger(t);return this.message_queue=[]},t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};WebSocketRails.HttpConnection=function(t){function i(t,e){var a;this.dispatcher=e,i.__super__.constructor.apply(this,arguments),this._url="http://"+t,this._conn=this._createXMLHttpObject(),this.last_pos=0;try{this._conn.onreadystatechange=function(t){return function(){return t._parse_stream()}}(this),this._conn.addEventListener("load",this.on_close,!1)}catch(n){a=n,this._conn.onprogress=function(t){return function(){return t._parse_stream()}}(this),this._conn.onload=this.on_close,this._conn.readyState=3}this._conn.open("GET",this._url,!0),this._conn.send()}return e(i,t),i.prototype.connection_type="http",i.prototype._httpFactories=function(){return[function(){return new XDomainRequest},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}]},i.prototype.close=function(){return this._conn.abort()},i.prototype.send_event=function(t){return i.__super__.send_event.apply(this,arguments),this._post_data(t.serialize())},i.prototype._post_data=function(t){return $.ajax(this._url,{type:"POST",data:{client_id:this.connection_id,data:t},success:function(){}})},i.prototype._createXMLHttpObject=function(){var t,e,i,a,n,r;for(a=!1,e=this._httpFactories(),n=0,r=e.length;r>n;n++){i=e[n];try{a=i()}catch(s){t=s;continue}break}return a},i.prototype._parse_stream=function(){var t,e,i;if(3===this._conn.readyState){t=this._conn.responseText.substring(this.last_pos),this.last_pos=this._conn.responseText.length,t=t.replace(/\]\]\[\[/g,"],[");try{return i=JSON.parse(t),this.on_message(i)}catch(a){e=a}}},i}(WebSocketRails.AbstractConnection)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function a(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return a.prototype=i.prototype,e.prototype=new a,e.__super__=i.prototype,e};WebSocketRails.WebSocketConnection=function(t){function i(t,e){this.url=t,this.dispatcher=e,i.__super__.constructor.apply(this,arguments),this.url.match(/^wss?:\/\//)?console.log("WARNING: Using connection urls with protocol specified is depricated"):this.url="https:"===window.location.protocol?"wss://"+this.url:"ws://"+this.url,this._conn=new WebSocket(this.url),this._conn.onmessage=function(t){return function(e){var i;return i=JSON.parse(e.data),t.on_message(i)}}(this),this._conn.onclose=function(t){return function(e){return t.on_close(e)}}(this),this._conn.onerror=function(t){return function(e){return t.on_error(e)}}(this)}return e(i,t),i.prototype.connection_type="websocket",i.prototype.close=function(){return this._conn.close()},i.prototype.send_event=function(t){return i.__super__.send_event.apply(this,arguments),this._conn.send(t.serialize())},i}(WebSocketRails.AbstractConnection)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};WebSocketRails.Channel=function(){function e(e,i,a,n,r){var s,o,l;this.name=e,this._dispatcher=i,this.is_private=null!=a?a:!1,this.on_success=n,this.on_failure=r,this._failure_launcher=t(this._failure_launcher,this),this._success_launcher=t(this._success_launcher,this),this._callbacks={},this._token=void 0,this._queue=[],o=this.is_private?"websocket_rails.subscribe_private":"websocket_rails.subscribe",this.connection_id=null!=(l=this._dispatcher._conn)?l.connection_id:void 0,s=new WebSocketRails.Event([o,{data:{channel:this.name}},this.connection_id],this._success_launcher,this._failure_launcher),this._dispatcher.trigger_event(s)}return e.prototype.destroy=function(){var t,e,i;return this.connection_id===(null!=(i=this._dispatcher._conn)?i.connection_id:void 0)&&(e="websocket_rails.unsubscribe",t=new WebSocketRails.Event([e,{data:{channel:this.name}},this.connection_id]),this._dispatcher.trigger_event(t)),this._callbacks={}},e.prototype.bind=function(t,e){var i;return null==(i=this._callbacks)[t]&&(i[t]=[]),this._callbacks[t].push(e)},e.prototype.trigger=function(t,e){var i;return i=new WebSocketRails.Event([t,{channel:this.name,data:e,token:this._token},this.connection_id]),this._token?this._dispatcher.trigger_event(i):this._queue.push(i)},e.prototype.dispatch=function(t,e){var i,a,n,r,s,o;if("websocket_rails.channel_token"===t)return this.connection_id=null!=(r=this._dispatcher._conn)?r.connection_id:void 0,this._token=e.token,this.flush_queue();if(null!=this._callbacks[t]){for(s=this._callbacks[t],o=[],a=0,n=s.length;n>a;a++)i=s[a],o.push(i(e));return o}},e.prototype._success_launcher=function(t){return null!=this.on_success?this.on_success(t):void 0},e.prototype._failure_launcher=function(t){return null!=this.on_failure?this.on_failure(t):void 0},e.prototype.flush_queue=function(){var t,e,i,a;for(a=this._queue,e=0,i=a.length;i>e;e++)t=a[e],this._dispatcher.trigger_event(t);return this._queue=[]},e}()}.call(this),function(t,e){function i(){var t=this;t.id=null,t.busy=!1,t.start=function(e,i){t.busy||(t.stop(),t.id=setTimeout(function(){e(),t.id=null,t.busy=!1},i),t.busy=!0)},t.stop=function(){null!==t.id&&(clearTimeout(t.id),t.id=null,t.busy=!1)}}function a(a,n,r){var s=this;s.id=r,s.table=a,s.options=n,s.breakpoints=[],s.breakpointNames="",s.columns={},s.plugins=e.footable.plugins.load(s);var o=s.options,l=o.classes,c=o.events,d=o.triggers,u=0;return s.timers={resize:new i,register:function(t){return s.timers[t]=new i,s.timers[t]}},s.init=function(){var i=t(e),a=t(s.table);if(e.footable.plugins.init(s),a.hasClass(l.loaded))return void s.raise(c.alreadyInitialized);s.raise(c.initializing),a.addClass(l.loading),a.find(o.columnDataSelector).each(function(){var t=s.getColumnData(this);s.columns[t.index]=t});for(var n in o.breakpoints)s.breakpoints.push({name:n,width:o.breakpoints[n]}),s.breakpointNames+=n+" ";s.breakpoints.sort(function(t,e){return t.width-e.width}),a.unbind(d.initialize).bind(d.initialize,function(){a.removeData("footable_info"),a.data("breakpoint",""),a.trigger(d.resize),a.removeClass(l.loading),a.addClass(l.loaded).addClass(l.main),s.raise(c.initialized)}).unbind(d.redraw).bind(d.redraw,function(){s.redraw()}).unbind(d.resize).bind(d.resize,function(){s.resize()}).unbind(d.expandFirstRow).bind(d.expandFirstRow,function(){a.find(o.toggleSelector).first().not("."+l.detailShow).trigger(d.toggleRow)}).unbind(d.expandAll).bind(d.expandAll,function(){a.find(o.toggleSelector).not("."+l.detailShow).trigger(d.toggleRow)}).unbind(d.collapseAll).bind(d.collapseAll,function(){a.find("."+l.detailShow).trigger(d.toggleRow)}),a.trigger(d.initialize),i.bind("resize.footable",function(){s.timers.resize.stop(),s.timers.resize.start(function(){s.raise(d.resize)},o.delay)})},s.addRowToggle=function(){if(o.addRowToggle){var e=t(s.table),i=!1;e.find("span."+l.toggle).remove();for(var a in s.columns){var n=s.columns[a];if(n.toggle){i=!0;var r="> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:nth-child("+(parseInt(n.index,10)+1)+")";return void e.find(r).not("."+l.detailCell).prepend(t(o.toggleHTMLElement).addClass(l.toggle))}}i||e.find("> tbody > tr:not(."+l.detail+",."+l.disabled+") > td:first-child").not("."+l.detailCell).prepend(t(o.toggleHTMLElement).addClass(l.toggle))}},s.setColumnClasses=function(){$table=t(s.table);for(var e in s.columns){var i=s.columns[e];if(null!==i.className){var a="",n=!0;t.each(i.matches,function(t,e){n||(a+=", "),a+="> tbody > tr:not(."+l.detail+") > td:nth-child("+(parseInt(e,10)+1)+")",n=!1}),$table.find(a).not("."+l.detailCell).addClass(i.className)}}},s.bindToggleSelectors=function(){var e=t(s.table);s.hasAnyBreakpointColumn()&&(e.find(o.toggleSelector).unbind(d.toggleRow).bind(d.toggleRow,function(){var e=t(this).is("tr")?t(this):t(this).parents("tr:first");s.toggleDetail(e)}),e.find(o.toggleSelector).unbind("click.footable").bind("click.footable",function(i){e.is(".breakpoint")&&t(i.target).is("td,."+l.toggle)&&t(this).trigger(d.toggleRow)}))},s.parse=function(t,e){var i=o.parsers[e.type]||o.parsers.alpha;return i(t)},s.getColumnData=function(e){var i=t(e),a=i.data("hide"),n=i.index();a=a||"",a=jQuery.map(a.split(","),function(t){return jQuery.trim(t)});var r={index:n,hide:{},type:i.data("type")||"alpha",name:i.data("name")||t.trim(i.text()),ignore:i.data("ignore")||!1,toggle:i.data("toggle")||!1,className:i.data("class")||null,matches:[],names:{},group:i.data("group")||null,groupName:null};if(null!==r.group){var l=t(s.table).find('> thead > tr.footable-group-row > th[data-group="'+r.group+'"], > thead > tr.footable-group-row > td[data-group="'+r.group+'"]').first();r.groupName=s.parse(l,{type:"alpha"})}var d=parseInt(i.prev().attr("colspan")||0,10);u+=d>1?d-1:0;var p=parseInt(i.attr("colspan")||0,10),h=r.index+u;if(p>1){var f=i.data("names");f=f||"",f=f.split(",");for(var g=0;p>g;g++)r.matches.push(g+h),g<f.length&&(r.names[g+h]=f[g])}else r.matches.push(h);r.hide["default"]="all"===i.data("hide")||t.inArray("default",a)>=0;var m=!1;for(var _ in o.breakpoints)r.hide[_]="all"===i.data("hide")||t.inArray(_,a)>=0,m=m||r.hide[_];r.hasBreakpoint=m;var b=s.raise(c.columnData,{column:{data:r,th:e}});return b.column.data},s.getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)},s.calculateWidth=function(t,e){return jQuery.isFunction(o.calculateWidthOverride)?o.calculateWidthOverride(t,e):(e.viewportWidth<e.width&&(e.width=e.viewportWidth),e.parentWidth<e.width&&(e.width=e.parentWidth),e)},s.hasBreakpointColumn=function(t){for(var e in s.columns)if(s.columns[e].hide[t]){if(s.columns[e].ignore)continue;return!0}return!1},s.hasAnyBreakpointColumn=function(){for(var t in s.columns)if(s.columns[t].hasBreakpoint)return!0;return!1},s.resize=function(){var e=t(s.table);if(e.is(":visible")&&s.hasAnyBreakpointColumn()){var i={width:e.width(),viewportWidth:s.getViewportWidth(),parentWidth:e.parent().width()};i=s.calculateWidth(e,i);var a=e.data("footable_info");if(e.data("footable_info",i),s.raise(c.resizing,{old:a,info:i}),!a||a&&a.width&&a.width!==i.width){for(var n,r=null,o=0;o<s.breakpoints.length;o++)if(n=s.breakpoints[o],n&&n.width&&i.width<=n.width){r=n;break}var l=null===r?"default":r.name,u=s.hasBreakpointColumn(l),p=e.data("breakpoint");e.data("breakpoint",l).removeClass("default breakpoint").removeClass(s.breakpointNames).addClass(l+(u?" breakpoint":"")),l!==p&&(e.trigger(d.redraw),s.raise(c.breakpoint,{breakpoint:l,info:i}))}s.raise(c.resized,{old:a,info:i})}},s.redraw=function(){s.addRowToggle(),s.bindToggleSelectors(),s.setColumnClasses();var e=t(s.table),i=e.data("breakpoint"),a=s.hasBreakpointColumn(i);e.find("> tbody > tr:not(."+l.detail+")").data("detail_created",!1).end().find("> thead > tr:last-child > th").each(function(){var a=s.columns[t(this).index()],n="",r=!0;t.each(a.matches,function(t,e){r||(n+=", ");var i=e+1;n+="> tbody > tr:not(."+l.detail+") > td:nth-child("+i+")",n+=", > tfoot > tr:not(."+l.detail+") > td:nth-child("+i+")",n+=", > colgroup > col:nth-child("+i+")",r=!1}),n+=', > thead > tr[data-group-row="true"] > th[data-group="'+a.group+'"]';var o=e.find(n).add(this);if(""!==i&&(a.hide[i]===!1?o.addClass("footable-visible").show():o.removeClass("footable-visible").hide()),1===e.find("> thead > tr.footable-group-row").length){var c=e.find('> thead > tr:last-child > th[data-group="'+a.group+'"]:visible, > thead > tr:last-child > th[data-group="'+a.group+'"]:visible'),d=e.find('> thead > tr.footable-group-row > th[data-group="'+a.group+'"], > thead > tr.footable-group-row > td[data-group="'+a.group+'"]'),u=0;t.each(c,function(){u+=parseInt(t(this).attr("colspan")||1,10)}),u>0?d.attr("colspan",u).show():d.hide()}}).end().find("> tbody > tr."+l.detailShow).each(function(){s.createOrUpdateDetailRow(this)}),e.find("> tbody > tr."+l.detailShow+":visible").each(function(){var e=t(this).next();e.hasClass(l.detail)&&(a?e.show():e.hide())}),e.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column"),e.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column"),e.find("> thead > tr, > tbody > tr").find("> th.footable-visible:last, > td.footable-visible:last").addClass("footable-last-column").end().find("> th.footable-visible:first, > td.footable-visible:first").addClass("footable-first-column"),s.raise(c.redrawn)},s.toggleDetail=function(e){var i=e.jquery?e:t(e),a=i.next();i.hasClass(l.detailShow)?(i.removeClass(l.detailShow),a.hasClass(l.detail)&&a.hide(),s.raise(c.rowCollapsed,{row:i[0]})):(s.createOrUpdateDetailRow(i[0]),i.addClass(l.detailShow).next().show(),s.raise(c.rowExpanded,{row:i[0]}))},s.removeRow=function(e){var i=e.jquery?e:t(e);i.hasClass(l.detail)&&(i=i.prev());var a=i.next();i.data("detail_created")===!0&&a.remove(),i.remove(),s.raise(c.rowRemoved)},s.appendRow=function(e){var i=e.jquery?e:t(e);t(s.table).find("tbody").append(i),s.redraw()},s.getColumnFromTdIndex=function(e){var i=null;for(var a in s.columns)if(t.inArray(e,s.columns[a].matches)>=0){i=s.columns[a];break}return i},s.createOrUpdateDetailRow=function(e){var i,a=t(e),n=a.next(),r=[];if(a.data("detail_created")===!0)return!0;if(a.is(":hidden"))return!1;if(s.raise(c.rowDetailUpdating,{row:a,detail:n}),a.find("> td:hidden").each(function(){var e=t(this).index(),i=s.getColumnFromTdIndex(e),a=i.name;return i.ignore===!0?!0:(e in i.names&&(a=i.names[e]),r.push({name:a,value:s.parse(this,i),display:t.trim(t(this).html()),group:i.group,groupName:i.groupName}),!0)}),0===r.length)return!1;var d=a.find("> td:visible").length,u=n.hasClass(l.detail);return u||(n=t('<tr class="'+l.detail+'"><td class="'+l.detailCell+'"><div class="'+l.detailInner+'"></div></td></tr>'),a.after(n)),n.find("> td:first").attr("colspan",d),i=n.find("."+l.detailInner).empty(),o.createDetail(i,r,o.createGroupedDetail,o.detailSeparator,l),a.data("detail_created",!0),s.raise(c.rowDetailUpdated,{row:a,detail:n}),!u},s.raise=function(e,i){s.options.debug===!0&&t.isFunction(s.options.log)&&s.options.log(e,"event"),i=i||{};var a={ft:s};t.extend(!0,a,i);var n=t.Event(e,a);return n.ft||t.extend(!0,n,a),t(s.table).trigger(n),n},s.reset=function(){var e=t(s.table);e.removeData("footable_info").data("breakpoint","").removeClass(l.loading).removeClass(l.loaded),e.find(o.toggleSelector).unbind(d.toggleRow).unbind("click.footable"),e.find("> tbody > tr").removeClass(l.detailShow),e.find("> tbody > tr."+l.detail).remove(),s.raise(c.reset)},s.init(),s}e.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(e){return t(e).data("value")||t.trim(t(e).text())},numeric:function(e){var i=t(e).data("value")||t(e).text().replace(/[^0-9.\-]/g,"");return i=parseFloat(i),isNaN(i)&&(i=0),i}},addRowToggle:!0,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td",detailSeparator:":",toggleHTMLElement:"<span />",createGroupedDetail:function(t){for(var e={_none:{name:null,data:[]}},i=0;i<t.length;i++){var a=t[i].group;null!==a?(a in e||(e[a]={name:t[i].groupName||t[i].group,data:[]}),e[a].data.push(t[i])):e._none.data.push(t[i])}return e},createDetail:function(t,e,i,a,n){var r=i(e);for(var s in r)if(0!==r[s].data.length){"_none"!==s&&t.append('<div class="'+n.detailInnerGroup+'">'+r[s].name+"</div>");for(var o=0;o<r[s].data.length;o++){var l=r[s].data[o].name?a:"";t.append('<div class="'+n.detailInnerRow+'"><div class="'+n.detailInnerName+'">'+r[s].data[o].name+l+'</div><div class="'+n.detailInnerValue+'">'+r[s].data[o].display+"</div></div>")}}},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name",detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row",expandAll:"footable_expand_all",collapseAll:"footable_collapse_all"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized",redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed",reset:"footable_reset"},debug:!1,log:null},version:{major:0,minor:5,toString:function(){return e.footable.version.major+"."+e.footable.version.minor},parse:function(t){return version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(t),{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(i){if(!t.isFunction(i))return e.footable.options.debug===!0&&console.error('Validation failed, expected type "function", received type "{0}".',typeof i),!1;var a=new i;return"string"!=typeof a.name?(e.footable.options.debug===!0&&console.error('Validation failed, plugin does not implement a string property called "name".',a),!1):t.isFunction(a.init)?(e.footable.options.debug===!0&&console.log('Validation succeeded for plugin "'+a.name+'".',a),!0):(e.footable.options.debug===!0&&console.error('Validation failed, plugin "'+a.name+'" does not implement a function called "init".',a),!1)},registered:[],register:function(i,a){e.footable.plugins._validate(i)&&(e.footable.plugins.registered.push(i),"object"==typeof a&&t.extend(!0,e.footable.options,a))},load:function(t){var i,a,n=[];for(a=0;a<e.footable.plugins.registered.length;a++)try{i=e.footable.plugins.registered[a],n.push(new i(t))}catch(r){e.footable.options.debug===!0&&console.error(r)}return n},init:function(t){for(var i=0;i<t.plugins.length;i++)try{t.plugins[i].init(t)}catch(a){e.footable.options.debug===!0&&console.error(a)}}}};var n=0;t.fn.footable=function(i){i=i||{};var r=t.extend(!0,{},e.footable.options,i);return this.each(function(){n++;var e=new a(this,r,n);t(this).data("footable",e)})}}(jQuery,window),function(t,e,i){function a(){var e=this;e.name="Footable Sortable",e.init=function(i){e.footable=i,i.options.sort===!0&&t(i.table).unbind(".sorting").bind({"footable_initialized.sorting":function(){var a,n,r=t(i.table),s=(r.find("> tbody"),i.options.classes.sort);if(r.data("sort")!==!1){r.find("> thead > tr:last-child > th, > thead > tr:last-child > td").each(function(){n=t(this),a=i.columns[n.index()],a.sort.ignore===!0||n.hasClass(s.sortable)||(n.addClass(s.sortable),t("<span />").addClass(s.indicator).appendTo(n))}),r.find("> thead > tr:last-child > th."+s.sortable+", > thead > tr:last-child > td."+s.sortable).unbind("click.footable").bind("click.footable",function(i){i.preventDefault(),n=t(this);var a=!n.hasClass(s.sorted);return e.doSort(n.index(),a),!1});var o=!1;for(var l in i.columns)if(a=i.columns[l],a.sort.initial){var c="descending"!==a.sort.initial;e.doSort(a.index,c);break}o&&i.bindToggleSelectors()}},"footable_redrawn.sorting":function(){var a=t(i.table),n=i.options.classes.sort;a.data("sorted")>=0&&a.find("> thead > tr:last-child > th").each(function(i){var a=t(this);return a.hasClass(n.sorted)||a.hasClass(n.descending)?void e.doSort(i):void 0})},"footable_column_data.sorting":function(e){var i=t(e.column.th);e.column.data.sort=e.column.data.sort||{},e.column.data.sort.initial=i.data("sort-initial")||!1,e.column.data.sort.ignore=i.data("sort-ignore")||!1,e.column.data.sort.selector=i.data("sort-selector")||null;var a=i.data("sort-match")||0;a>=e.column.data.matches.length&&(a=0),e.column.data.sort.match=e.column.data.matches[a]}}).data("footable-sort",e)},e.doSort=function(a,n){var r=e.footable;if(t(r.table).data("sort")!==!1){var s=t(r.table),o=s.find("> tbody"),l=r.columns[a],c=s.find("> thead > tr:last-child > th:eq("+a+")"),d=r.options.classes.sort,u=r.options.events.sort;if(n=n===i?c.hasClass(d.sorted):"toggle"===n?!c.hasClass(d.sorted):n,l.sort.ignore===!0)return!0;var p=r.raise(u.sorting,{column:l,direction:n?"ASC":"DESC"});p&&p.result===!1||(s.data("sorted",l.index),s.find("> thead > tr:last-child > th, > thead > tr:last-child > td").not(c).removeClass(d.sorted+" "+d.descending),n===i&&(n=c.hasClass(d.sorted)),n?c.removeClass(d.descending).addClass(d.sorted):c.removeClass(d.sorted).addClass(d.descending),e.sort(r,o,l,n),r.bindToggleSelectors(),r.raise(u.sorted,{column:l,direction:n?"ASC":"DESC"}))}},e.rows=function(e,a,n){var r=[];return a.find("> tr").each(function(){var a=t(this),s=null;if(a.hasClass(e.options.classes.detail))return!0;a.next().hasClass(e.options.classes.detail)&&(s=a.next().get(0));var o={row:a,detail:s};return n!==i&&(o.value=e.parse(this.cells[n.sort.match],n)),r.push(o),!0}).detach(),r},e.sort=function(t,i,a,n){var r=e.rows(t,i,a),s=t.options.sorters[a.type]||t.options.sorters.alpha;r.sort(function(t,e){return n?s(t.value,e.value):s(e.value,t.value)});for(var o=0;o<r.length;o++)i.append(r[o].row),null!==r[o].detail&&i.append(r[o].detail)}}if(e.footable===i||null===e.footable)throw new Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");var n={sort:!0,sorters:{alpha:function(t,e){return"string"==typeof t&&(t=t.toLowerCase()),"string"==typeof e&&(e=e.toLowerCase()),t===e?0:e>t?-1:1},numeric:function(t,e){return t-e}},classes:{sort:{sortable:"footable-sortable",sorted:"footable-sorted",descending:"footable-sorted-desc",indicator:"footable-sort-indicator"}},events:{sort:{sorting:"footable_sorting",sorted:"footable_sorted"}}};e.footable.plugins.register(a,n)}(jQuery,window),function(t,e,i){function a(){var e=this;e.name="Footable Filter",e.init=function(i){if(e.footable=i,i.options.filter.enabled===!0){if(t(i.table).data("filter")===!1)return;i.timers.register("filter"),t(i.table).unbind(".filtering").bind({"footable_initialized.filtering":function(){var a=t(i.table),n={input:a.data("filter")||i.options.filter.input,timeout:a.data("filter-timeout")||i.options.filter.timeout,minimum:a.data("filter-minimum")||i.options.filter.minimum,disableEnter:a.data("filter-disable-enter")||i.options.filter.disableEnter};n.disableEnter&&t(n.input).keypress(function(t){return window.event?13!==window.event.keyCode:13!==t.which}),a.bind("footable_clear_filter",function(){t(n.input).val(""),e.clearFilter()}),a.bind("footable_filter",function(t,i){e.filter(i.filter)}),t(n.input).keyup(function(a){i.timers.filter.stop(),27===a.which&&t(n.input).val(""),i.timers.filter.start(function(){var i=t(n.input).val()||"";e.filter(i)},n.timeout)})},"footable_redrawn.filtering":function(){var a=t(i.table),n=a.data("filter-string");n&&e.filter(n)}}).data("footable-filter",e)}},e.filter=function(i){var a=e.footable,n=t(a.table),r=n.data("filter-minimum")||a.options.filter.minimum,s=!i,o=a.raise("footable_filtering",{filter:i,clear:s});if(!(o&&o.result===!1||o.filter&&o.filter.length<r))if(o.clear)e.clearFilter();else{var l=o.filter.split(" ");n.find("> tbody > tr").hide().addClass("footable-filtered");var c=n.find("> tbody > tr:not(.footable-row-detail)");t.each(l,function(t,e){e&&e.length>0&&(n.data("current-filter",e),c=c.filter(a.options.filter.filterFunction))}),c.each(function(){e.showRow(this,a),t(this).removeClass("footable-filtered")}),n.data("filter-string",o.filter),a.raise("footable_filtered",{filter:o.filter,clear:!1})}},e.clearFilter=function(){var i=e.footable,a=t(i.table);a.find("> tbody > tr:not(.footable-row-detail)").removeClass("footable-filtered").each(function(){e.showRow(this,i)}),a.removeData("filter-string"),i.raise("footable_filtered",{clear:!0})},e.showRow=function(e,i){var a=t(e),n=a.next(),r=t(i.table);a.is(":visible")||(r.hasClass("breakpoint")&&a.hasClass("footable-detail-show")&&n.hasClass("footable-row-detail")?(a.add(n).show(),i.createOrUpdateDetailRow(e)):a.show())}}if(e.footable===i||null===e.footable)throw new Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");var n={filter:{enabled:!0,input:".footable-filter",timeout:300,minimum:2,disableEnter:!1,filterFunction:function(){var e=t(this),i=e.parents("table:first"),a=i.data("current-filter").toUpperCase(),n=e.find("td").text();return i.data("filter-text-only")||e.find("td[data-value]").each(function(){n+=t(this).data("value")}),n.toUpperCase().indexOf(a)>=0}}};e.footable.plugins.register(a,n)}(jQuery,window),function(t,e,i){function a(e){var i=t(e.table),a=i.data();this.pageNavigation=a.pageNavigation||e.options.pageNavigation,this.pageSize=a.pageSize||e.options.pageSize,this.firstText=a.firstText||e.options.firstText,this.previousText=a.previousText||e.options.previousText,this.nextText=a.nextText||e.options.nextText,this.lastText=a.lastText||e.options.lastText,this.limitNavigation=parseInt(a.limitNavigation||e.options.limitNavigation||r.limitNavigation,10),this.limitPreviousText=a.limitPreviousText||e.options.limitPreviousText,this.limitNextText=a.limitNextText||e.options.limitNextText,this.limit=this.limitNavigation>0,this.currentPage=a.currentPage||0,this.pages=[],this.control=!1}function n(){var e=this;e.name="Footable Paginate",e.init=function(i){if(i.options.paginate===!0){if(t(i.table).data("page")===!1)return;e.footable=i,t(i.table).unbind(".paging").bind({"footable_initialized.paging footable_row_removed.paging footable_redrawn.paging footable_sorted.paging footable_filtered.paging":function(){e.setupPaging()}}).data("footable-paging",e)}},e.setupPaging=function(){var i=e.footable,n=t(i.table).find("> tbody");i.pageInfo=new a(i),e.createPages(i,n),e.createNavigation(i,n),e.fillPage(i,n,i.pageInfo.currentPage)},e.createPages=function(e,i){var a=1,n=e.pageInfo,r=a*n.pageSize,s=[],o=[];n.pages=[];var l=i.find("> tr:not(.footable-filtered,.footable-row-detail)");l.each(function(t,e){s.push(e),t===r-1?(n.pages.push(s),a++,r=a*n.pageSize,s=[]):t>=l.length-l.length%n.pageSize&&o.push(e)}),o.length>0&&n.pages.push(o),n.currentPage>=n.pages.length&&(n.currentPage=n.pages.length-1),n.currentPage<0&&(n.currentPage=0),1===n.pages.length?t(e.table).addClass("no-paging"):t(e.table).removeClass("no-paging")},e.createNavigation=function(i){var a=t(i.table).find(i.pageInfo.pageNavigation);if(0===a.length){if(a=t(i.pageInfo.pageNavigation),a.parents("table:first").length>0&&a.parents("table:first")!==t(i.table))return;
a.length>1&&i.options.debug===!0&&console.error("More than one pagination control was found!")}if(0!==a.length){a.is("ul")||(0===a.find("ul:first").length&&a.append("<ul />"),a=a.find("ul")),a.find("li").remove();var n=i.pageInfo;n.control=a,n.pages.length>0&&(a.append('<li class="footable-page-arrow"><a data-page="first" href="#first">'+i.pageInfo.firstText+"</a>"),a.append('<li class="footable-page-arrow"><a data-page="prev" href="#prev">'+i.pageInfo.previousText+"</a></li>"),n.limit&&a.append('<li class="footable-page-arrow"><a data-page="limit-prev" href="#limit-prev">'+i.pageInfo.limitPreviousText+"</a></li>"),n.limit||t.each(n.pages,function(t,e){e.length>0&&a.append('<li class="footable-page"><a data-page="'+t+'" href="#">'+(t+1)+"</a></li>")}),n.limit&&(a.append('<li class="footable-page-arrow"><a data-page="limit-next" href="#limit-next">'+i.pageInfo.limitNextText+"</a></li>"),e.createLimited(a,n,0)),a.append('<li class="footable-page-arrow"><a data-page="next" href="#next">'+i.pageInfo.nextText+"</a></li>"),a.append('<li class="footable-page-arrow"><a data-page="last" href="#last">'+i.pageInfo.lastText+"</a></li>")),a.off("click","a[data-page]").on("click","a[data-page]",function(r){r.preventDefault();var s=t(this).data("page"),o=n.currentPage;if("first"===s)o=0;else if("prev"===s)o>0&&o--;else if("next"===s)o<n.pages.length-1&&o++;else if("last"===s)o=n.pages.length-1;else if("limit-prev"===s){o=-1;var l=a.find(".footable-page:first a").data("page");e.createLimited(a,n,l-n.limitNavigation),e.setPagingClasses(a,n.currentPage,n.pages.length)}else if("limit-next"===s){o=-1;var c=a.find(".footable-page:last a").data("page");e.createLimited(a,n,c+1),e.setPagingClasses(a,n.currentPage,n.pages.length)}else o=s;if(o>=0){if(n.limit&&n.currentPage!=o){for(var d=o;d%n.limitNavigation!==0;)d-=1;e.createLimited(a,n,d)}e.paginate(i,o)}}),e.setPagingClasses(a,n.currentPage,n.pages.length)}},e.createLimited=function(t,e,i){i=i||0,t.find("li.footable-page").remove();var a,n,r=t.find('li.footable-page-arrow > a[data-page="limit-prev"]').parent(),s=t.find('li.footable-page-arrow > a[data-page="limit-next"]').parent();for(a=e.pages.length-1;a>=0;a--)n=e.pages[a],a>=i&&a<i+e.limitNavigation&&n.length>0&&r.after('<li class="footable-page"><a data-page="'+a+'" href="#">'+(a+1)+"</a></li>");0===i?r.hide():r.show(),i+e.limitNavigation>=e.pages.length?s.hide():s.show()},e.paginate=function(i,a){var n=i.pageInfo;if(n.currentPage!==a){var r=t(i.table).find("> tbody"),s=i.raise("footable_paging",{page:a,size:n.pageSize});if(s&&s.result===!1)return;e.fillPage(i,r,a),n.control.find("li").removeClass("active disabled"),e.setPagingClasses(n.control,n.currentPage,n.pages.length)}},e.setPagingClasses=function(t,e,i){t.find("li.footable-page > a[data-page="+e+"]").parent().addClass("active"),e>=i-1&&(t.find('li.footable-page-arrow > a[data-page="next"]').parent().addClass("disabled"),t.find('li.footable-page-arrow > a[data-page="last"]').parent().addClass("disabled")),1>e&&(t.find('li.footable-page-arrow > a[data-page="first"]').parent().addClass("disabled"),t.find('li.footable-page-arrow > a[data-page="prev"]').parent().addClass("disabled"))},e.fillPage=function(i,a,n){i.pageInfo.currentPage=n,t(i.table).data("currentPage",n),a.find("> tr").hide(),t(i.pageInfo.pages[n]).each(function(){e.showRow(this,i)}),i.raise("footable_page_filled")},e.showRow=function(e,i){var a=t(e),n=a.next(),r=t(i.table);r.hasClass("breakpoint")&&a.hasClass("footable-detail-show")&&n.hasClass("footable-row-detail")?(a.add(n).show(),i.createOrUpdateDetailRow(e)):a.show()}}if(e.footable===i||null===e.footable)throw new Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");var r={paginate:!0,pageSize:10,pageNavigation:".pagination",firstText:"&laquo;",previousText:"&lsaquo;",nextText:"&rsaquo;",lastText:"&raquo;",limitNavigation:0,limitPreviousText:"...",limitNextText:"..."};e.footable.plugins.register(n,r)}(jQuery,window),function(t){var e,i,a,n,r,s,o,l="Close",c="BeforeClose",d="AfterClose",u="BeforeAppend",p="MarkupParse",h="Open",f="Change",g="mfp",m="."+g,_="mfp-ready",b="mfp-removing",v="mfp-prevent-close",y=function(){},k=!!window.jQuery,w=t(window),D=function(t,i){e.ev.on(g+t+m,i)},C=function(e,i,a,n){var r=document.createElement("div");return r.className="mfp-"+e,a&&(r.innerHTML=a),n?i&&i.appendChild(r):(r=t(r),i&&r.appendTo(i)),r},x=function(i,a){e.ev.triggerHandler(g+i,a),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(a)?a:[a]))},I=function(i){return i===o&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),o=i),e.currTemplate.closeBtn},M=function(){t.magnificPopup.instance||(e=new y,e.init(),t.magnificPopup.instance=e)},S=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};y.prototype={constructor:y,init:function(){var i=navigator.appVersion;e.isIE7=-1!==i.indexOf("MSIE 7."),e.isIE8=-1!==i.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=S(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),n=t(document),e.popupsCache={}},open:function(i){a||(a=t(document.body));var r;if(i.isObj===!1){e.items=i.items.toArray(),e.index=0;var o,l=i.items;for(r=0;l.length>r;r++)if(o=l[r],o.parsed&&(o=o.el[0]),o===i.el[0]){e.index=r;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(e.isOpen)return void e.updateItemHTML();e.types=[],s="",e.ev=i.mainEl&&i.mainEl.length?i.mainEl.eq(0):n,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=C("bg").on("click"+m,function(){e.close()}),e.wrap=C("wrap").attr("tabindex",-1).on("click"+m,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=C("container",e.wrap)),e.contentContainer=C("content"),e.st.preloader&&(e.preloader=C("preloader",e.container,e.st.tLoading));var c=t.magnificPopup.modules;for(r=0;c.length>r;r++){var d=c[r];d=d.charAt(0).toUpperCase()+d.slice(1),e["init"+d].call(e)}x("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(D(p,function(t,e,i,a){i.close_replaceWith=I(a.type)}),s+=" mfp-close-btn-in"):e.wrap.append(I())),e.st.alignTop&&(s+=" mfp-align-top"),e.wrap.css(e.fixedContentPos?{overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}:{top:w.scrollTop(),position:"absolute"}),(e.st.fixedBgPos===!1||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:n.height(),position:"absolute"}),e.st.enableEscapeKey&&n.on("keyup"+m,function(t){27===t.keyCode&&e.close()}),w.on("resize"+m,function(){e.updateSize()}),e.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&e.wrap.addClass(s);var u=e.wH=w.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(u)){var g=e._getScrollbarSize();g&&(f.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var b=e.st.mainClass;return e.isIE7&&(b+=" mfp-ie7"),b&&e._addClassToMFP(b),e.updateItemHTML(),x("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||a),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassToMFP(_),e._setFocus()):e.bgOverlay.addClass(_),n.on("focusin"+m,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(u),x(h),i},close:function(){e.isOpen&&(x(c),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(b),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){x(l);var i=b+" "+_+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var a={marginRight:""};e.isIE7?t("body, html").css("overflow",""):a.overflow="",t("html").css(a)}n.off("keyup"+m+" focusin"+m),e.ev.off(m),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&e.currTemplate[e.currItem.type]!==!0||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,x(d)},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,a=window.innerHeight*i;e.wrap.css("height",a),e.wH=a}else e.wH=t||w.height();e.fixedContentPos||e.wrap.css("height",e.wH),x("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var a=i.type;if(x("BeforeChange",[e.currItem?e.currItem.type:"",a]),e.currItem=i,!e.currTemplate[a]){var n=e.st[a]?e.st[a].markup:!1;x("FirstMarkupParse",n),e.currTemplate[a]=n?t(n):!0}r&&r!==i.type&&e.container.removeClass("mfp-"+r+"-holder");var s=e["get"+a.charAt(0).toUpperCase()+a.slice(1)](i,e.currTemplate[a]);e.appendContent(s,a),i.preloaded=!0,x(f,i),r=i.type,e.container.prepend(e.contentContainer),x("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&e.currTemplate[i]===!0?e.content.find(".mfp-close").length||e.content.append(I()):e.content=t:e.content="",x(u),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var a,n=e.items[i];if(n.tagName?n={el:t(n)}:(a=n.type,n={data:n,src:n.src}),n.el){for(var r=e.types,s=0;r.length>s;s++)if(n.el.hasClass("mfp-"+r[s])){a=r[s];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=a||e.st.type||"inline",n.index=i,n.parsed=!0,e.items[i]=n,x("ElementParse",n),e.items[i]},addGroup:function(t,i){var a=function(a){a.mfpEl=this,e._openClick(a,t,i)};i||(i={});var n="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(n).on(n,a)):(i.isObj=!1,i.delegate?t.off(n).on(n,i.delegate,a):(i.items=t,t.off(n).on(n,a)))},_openClick:function(i,a,n){var r=void 0!==n.midClick?n.midClick:t.magnificPopup.defaults.midClick;if(r||2!==i.which&&!i.ctrlKey&&!i.metaKey){var s=void 0!==n.disableOn?n.disableOn:t.magnificPopup.defaults.disableOn;if(s)if(t.isFunction(s)){if(!s.call(e))return!0}else if(s>w.width())return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),n.el=t(i.mfpEl),n.delegate&&(n.items=a.find(n.delegate)),e.open(n)}},updateStatus:function(t,a){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),a||"loading"!==t||(a=e.st.tLoading);var n={status:t,text:a};x("UpdateStatus",n),t=n.status,a=n.text,e.preloader.html(a),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(v)){var a=e.st.closeOnContentClick,n=e.st.closeOnBgClick;if(a&&n)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(a)return!0}else if(n&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?n.height():document.body.scrollHeight)>(t||w.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){return i.target===e.wrap[0]||t.contains(e.wrap[0],i.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,i,a){var n;a.data&&(i=t.extend(a.data,i)),x(p,[e,i,a]),t.each(i,function(t,i){if(void 0===i||i===!1)return!0;if(n=t.split("_"),n.length>1){var a=e.find(m+"-"+n[0]);if(a.length>0){var r=n[1];"replaceWith"===r?a[0]!==i[0]&&a.replaceWith(i):"img"===r?a.is("img")?a.attr("src",i):a.replaceWith('<img src="'+i+'" class="'+a.attr("class")+'" />'):a.attr(n[1],i)}}else e.find(m+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.id="mfp-sbm",t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:y.prototype,modules:[],open:function(e,i){return M(),e=e?t.extend(!0,{},e):{},e.isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(i){M();var a=t(this);if("string"==typeof i)if("open"===i){var n,r=k?a.data("magnificPopup"):a[0].magnificPopup,s=parseInt(arguments[1],10)||0;r.items?n=r.items[s]:(n=a,r.delegate&&(n=n.find(r.delegate)),n=n.eq(s)),e._openClick({mfpEl:n},a,r)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),k?a.data("magnificPopup",i):a[0].magnificPopup=i,e.addGroup(a,i);return a};var T,N,E,F="inline",A=function(){E&&(N.after(E.addClass(T)).detach(),E=null)};t.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(F),D(l+"."+F,function(){A()})},getInline:function(i,a){if(A(),i.src){var n=e.st.inline,r=t(i.src);if(r.length){var s=r[0].parentNode;s&&s.tagName&&(N||(T=n.hiddenClass,N=C(T),T="mfp-"+T),E=r.after(N).detach().removeClass(T)),e.updateStatus("ready")}else e.updateStatus("error",n.tNotFound),r=t("<div>");return i.inlineElement=r,r}return e.updateStatus("ready"),e._parseMarkup(a,{},i),a}}});var P,O="ajax",z=function(){P&&a.removeClass(P)},R=function(){z(),e.req&&e.req.abort()};t.magnificPopup.registerModule(O,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(O),P=e.st.ajax.cursor,D(l+"."+O,R),D("BeforeChange."+O,R)},getAjax:function(i){P&&a.addClass(P),e.updateStatus("loading");var n=t.extend({url:i.src,success:function(a,n,r){var s={data:a,xhr:r};x("ParseAjax",s),e.appendContent(t(s.data),O),i.finished=!0,z(),e._setFocus(),setTimeout(function(){e.wrap.addClass(_)},16),e.updateStatus("ready"),x("AjaxContentAdded")},error:function(){z(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(n),""}}});var j,Y=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var a=e.st.image.titleSrc;if(a){if(t.isFunction(a))return a.call(e,i);if(i.el)return i.el.attr(a)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,i=".image";e.types.push("image"),D(h+i,function(){"image"===e.currItem.type&&t.cursor&&a.addClass(t.cursor)}),D(l+i,function(){t.cursor&&a.removeClass(t.cursor),w.off("resize"+m)}),D("Resize"+i,e.resizeImage),e.isLowIE&&D("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,j&&clearInterval(j),t.isCheckingImgSize=!1,x("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,a=t.img[0],n=function(r){j&&clearInterval(j),j=setInterval(function(){return a.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(j),i++,void(3===i?n(10):40===i?n(50):100===i&&n(500)))},r)};n(1)},getImage:function(i,a){var n=0,r=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,x("ImageLoadComplete")):(n++,200>n?setTimeout(r,100):s()))},s=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",o.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},o=e.st.image,l=a.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.img=t(c).on("load.mfploader",r).on("error.mfploader",s),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),c=i.img[0],c.naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(a,{title:Y(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(j&&clearInterval(j),i.loadError?(a.addClass("mfp-loading"),e.updateStatus("error",o.tError.replace("%url%",i.src))):(a.removeClass("mfp-loading"),e.updateStatus("ready")),a):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,a.addClass("mfp-loading"),e.findImageSize(i)),a)}}});var L,W=function(){return void 0===L&&(L=void 0!==document.createElement("p").style.MozTransform),L};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,a=".zoom";if(i.enabled&&e.supportsTransition){var n,r,s=i.duration,o=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),a="all "+i.duration/1e3+"s "+i.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return n["-webkit-"+r]=n["-moz-"+r]=n["-o-"+r]=n[r]=a,e.css(n),e},d=function(){e.content.css("visibility","visible")};D("BuildControls"+a,function(){if(e._allowZoom()){if(clearTimeout(n),e.content.css("visibility","hidden"),t=e._getItemToZoom(),!t)return void d();r=o(t),r.css(e._getOffset()),e.wrap.append(r),n=setTimeout(function(){r.css(e._getOffset(!0)),n=setTimeout(function(){d(),setTimeout(function(){r.remove(),t=r=null,x("ZoomAnimationEnded")},16)},s)},16)}}),D(c+a,function(){if(e._allowZoom()){if(clearTimeout(n),e.st.removalDelay=s,!t){if(t=e._getItemToZoom(),!t)return;r=o(t)}r.css(e._getOffset(!0)),e.wrap.append(r),e.content.css("visibility","hidden"),setTimeout(function(){r.css(e._getOffset())},16)}}),D(l+a,function(){e._allowZoom()&&(d(),r&&r.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return e.currItem.hasSize?e.currItem.img:!1},_getOffset:function(i){var a;a=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem);var n=a.offset(),r=parseInt(a.css("padding-top"),10),s=parseInt(a.css("padding-bottom"),10);n.top-=t(window).scrollTop()-r;var o={width:a.width(),height:(k?a.innerHeight():a[0].offsetHeight)-s-r};return W()?o["-moz-transform"]=o.transform="translate("+n.left+"px,"+n.top+"px)":(o.left=n.left,o.top=n.top),o}}});var B="iframe",H="//about:blank",K=function(t){if(e.currTemplate[B]){var i=e.currTemplate[B].find("iframe");i.length&&(t||(i[0].src=H),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(B,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(B),D("BeforeChange",function(t,e,i){e!==i&&(e===B?K():i===B&&K(!0))}),D(l+"."+B,function(){K()})},getIframe:function(i,a){var n=i.src,r=e.st.iframe;t.each(r.patterns,function(){return n.indexOf(this.index)>-1?(this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1):void 0});var s={};return r.srcAction&&(s[r.srcAction]=n),e._parseMarkup(a,s,i),e.updateStatus("ready"),a}}});var q=function(t){var i=e.items.length;return t>i-1?t-i:0>t?i+t:t},U=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,a=".mfp-gallery",r=Boolean(t.fn.mfpFastClick);return e.direction=!0,i&&i.enabled?(s+=" mfp-gallery",D(h+a,function(){i.navigateByImgClick&&e.wrap.on("click"+a,".mfp-img",function(){return e.items.length>1?(e.next(),!1):void 0}),n.on("keydown"+a,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),D("UpdateStatus"+a,function(t,i){i.text&&(i.text=U(i.text,e.currItem.index,e.items.length))}),D(p+a,function(t,a,n,r){var s=e.items.length;n.counter=s>1?U(i.tCounter,r.index,s):""}),D("BuildControls"+a,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var a=i.arrowMarkup,n=e.arrowLeft=t(a.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(v),s=e.arrowRight=t(a.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(v),o=r?"mfpFastClick":"click";n[o](function(){e.prev()}),s[o](function(){e.next()}),e.isIE7&&(C("b",n[0],!1,!0),C("a",n[0],!1,!0),C("b",s[0],!1,!0),C("a",s[0],!1,!0)),e.container.append(n.add(s))}}),D(f+a,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),void D(l+a,function(){n.off(a),e.wrap.off("click"+a),e.arrowLeft&&r&&e.arrowLeft.add(e.arrowRight).destroyMfpFastClick(),e.arrowRight=e.arrowLeft=null})):!1},next:function(){e.direction=!0,e.index=q(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=q(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,a=Math.min(i[0],e.items.length),n=Math.min(i[1],e.items.length);for(t=1;(e.direction?n:a)>=t;t++)e._preloadItem(e.index+t);for(t=1;(e.direction?a:n)>=t;t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=q(i),!e.items[i].preloaded){var a=e.items[i];a.parsed||(a=e.parseEl(i)),x("LazyLoad",a),"image"===a.type&&(a.img=t('<img class="mfp-img" />').on("load.mfploader",function(){a.hasSize=!0}).on("error.mfploader",function(){a.hasSize=!0,a.loadError=!0,x("LazyLoadError",a)}).attr("src",a.src)),a.preloaded=!0}}}});var V="retina";t.magnificPopup.registerModule(V,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;i=isNaN(i)?i():i,i>1&&(D("ImageHasSize."+V,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),D("ElementParse."+V,function(e,a){a.src=t.replaceSrc(a,i)}))}}}}),function(){var e=1e3,i="ontouchstart"in window,a=function(){w.off("touchmove"+r+" touchend"+r)},n="mfpFastClick",r="."+n;t.fn.mfpFastClick=function(n){return t(this).each(function(){var s,o=t(this);if(i){var l,c,d,u,p,h;o.on("touchstart"+r,function(t){u=!1,h=1,p=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],c=p.clientX,d=p.clientY,w.on("touchmove"+r,function(t){p=t.originalEvent?t.originalEvent.touches:t.touches,h=p.length,p=p[0],(Math.abs(p.clientX-c)>10||Math.abs(p.clientY-d)>10)&&(u=!0,a())}).on("touchend"+r,function(t){a(),u||h>1||(s=!0,t.preventDefault(),clearTimeout(l),l=setTimeout(function(){s=!1},e),n())})})}o.on("click"+r,function(){s||n()})})},t.fn.destroyMfpFastClick=function(){t(this).off("touchstart"+r+" click"+r),i&&w.off("touchmove"+r+" touchend"+r)}}(),M()}(window.jQuery||window.Zepto),!function(t,e){"use strict";var i,a=t.document;i=function(){var i,n,r,s,o,l,c,d,u,p,h,f,g,m={},_={},b=!1,v={ENTER:13,ESC:27,SPACE:32},y=[];return _={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},g=function(){var t,i,n=!1,r=a.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(t in s)if(r.style[t]!==e){i=s[t],n=!0;break}return{type:i,supported:n}},i=function(t){return a.getElementById(t)},m={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:e,addListeners:function(t){var e,i,l,c,d,u="undefined"!=typeof r,p="undefined"!=typeof n,h="undefined"!=typeof f,g="",m=this;e=function(e){return"undefined"!=typeof e.preventDefault&&e.preventDefault(),l(e),"undefined"!=typeof f&&(g=f.value),"function"==typeof t&&("undefined"!=typeof f?t(!0,g):t(!0)),!1},i=function(e){return"undefined"!=typeof e.preventDefault&&e.preventDefault(),l(e),"function"==typeof t&&t(!1),!1},l=function(){m.hide(),m.unbind(a.body,"keyup",c),m.unbind(s,"focus",d),u&&m.unbind(r,"click",e),p&&m.unbind(n,"click",i)},c=function(t){var a=t.keyCode;(a===v.SPACE&&!h||h&&a===v.ENTER)&&e(t),a===v.ESC&&p&&i(t)},d=function(){h?f.focus():!p||m.buttonReverse?r.focus():n.focus()},this.bind(s,"focus",d),this.bind(o,"focus",d),u&&this.bind(r,"click",e),p&&this.bind(n,"click",i),this.bind(a.body,"keyup",c),this.transition.supported||this.setFocus()},bind:function(t,e,i){"function"==typeof t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},handleErrors:function(){if("undefined"!=typeof t.onerror){var e=this;return t.onerror=function(t,i,a){e.error("["+t+" on line "+a+" of "+i+"]",0)},!0}return!1},appendButtons:function(t,e){return this.buttonReverse?e+t:t+e},build:function(t){var e="",i=t.type,a=t.message,n=t.cssClass||"";switch(e+='<div class="alertify-dialog">',e+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===m.buttonFocus&&(e+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===i&&(e+='<div id="alertify-form">'),e+='<article class="alertify-inner">',e+=_.message.replace("{{message}}",a),"prompt"===i&&(e+=_.input),e+=_.buttons.holder,e+="</article>","prompt"===i&&(e+="</div>"),e+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',e+="</div>",i){case"confirm":e=e.replace("{{buttons}}",this.appendButtons(_.buttons.cancel,_.buttons.ok)),e=e.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":e=e.replace("{{buttons}}",this.appendButtons(_.buttons.cancel,_.buttons.submit)),e=e.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":e=e.replace("{{buttons}}",_.buttons.ok),e=e.replace("{{ok}}",this.labels.ok)}return u.className="alertify alertify-"+i+" "+n,d.className="alertify-cover",e},close:function(t,e){var i,a,n=e&&!isNaN(e)?+e:this.delay,r=this;this.bind(t,"click",function(){i(t)}),a=function(t){t.stopPropagation(),r.unbind(this,r.transition.type,a),p.removeChild(this),p.hasChildNodes()||(p.className+=" alertify-logs-hidden")},i=function(t){"undefined"!=typeof t&&t.parentNode===p&&(r.transition.supported?(r.bind(t,r.transition.type,a),t.className+=" alertify-log-hide"):(p.removeChild(t),p.hasChildNodes()||(p.className+=" alertify-logs-hidden")))},0!==e&&setTimeout(function(){i(t)},n)},dialog:function(t,e,i,n,r){c=a.activeElement;var s=function(){p&&null!==p.scrollTop&&d&&null!==d.scrollTop||s()};if("string"!=typeof t)throw new Error("message must be a string");if("string"!=typeof e)throw new Error("type must be a string");if("undefined"!=typeof i&&"function"!=typeof i)throw new Error("fn must be a function");return this.init(),s(),y.push({type:e,message:t,callback:i,placeholder:n,cssClass:r}),b||this.setup(),this},extend:function(t){if("string"!=typeof t)throw new Error("extend method must have exactly one paramter");return function(e,i){return this.log(e,t,i),this}},hide:function(){var t,e=this;y.splice(0,1),y.length>0?this.setup(!0):(b=!1,t=function(i){i.stopPropagation(),e.unbind(u,e.transition.type,t)},this.transition.supported?(this.bind(u,this.transition.type,t),u.className="alertify alertify-hide alertify-hidden"):u.className="alertify alertify-hide alertify-hidden alertify-isHidden",d.className="alertify-cover alertify-cover-hidden",c.focus())},init:function(){a.createElement("nav"),a.createElement("article"),a.createElement("section"),null==i("alertify-cover")&&(d=a.createElement("div"),d.setAttribute("id","alertify-cover"),d.className="alertify-cover alertify-cover-hidden",a.body.appendChild(d)),null==i("alertify")&&(b=!1,y=[],u=a.createElement("section"),u.setAttribute("id","alertify"),u.className="alertify alertify-hidden",a.body.appendChild(u)),null==i("alertify-logs")&&(p=a.createElement("section"),p.setAttribute("id","alertify-logs"),p.className="alertify-logs alertify-logs-hidden",a.body.appendChild(p)),a.body.setAttribute("tabindex","0"),this.transition=g()},log:function(t,e,i){var a=function(){p&&null!==p.scrollTop||a()};return this.init(),a(),p.className="alertify-logs",this.notify(t,e,i),this},notify:function(t,e,i){var n=a.createElement("article");n.className="alertify-log"+("string"==typeof e&&""!==e?" alertify-log-"+e:""),n.innerHTML=t,p.appendChild(n),setTimeout(function(){n.className=n.className+" alertify-log-show"},50),this.close(n,i)},set:function(t){var e;if("object"!=typeof t&&t instanceof Array)throw new Error("args must be an object");for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},setFocus:function(){f?(f.focus(),f.select()):l.focus()},setup:function(t){var a,c=y[0],d=this;b=!0,a=function(t){t.stopPropagation(),d.setFocus(),d.unbind(u,d.transition.type,a)},this.transition.supported&&!t&&this.bind(u,this.transition.type,a),u.innerHTML=this.build(c),s=i("alertify-resetFocus"),o=i("alertify-resetFocusBack"),r=i("alertify-ok")||e,n=i("alertify-cancel")||e,l="cancel"===m.buttonFocus?n:"none"===m.buttonFocus?i("alertify-noneFocus"):r,f=i("alertify-text")||e,h=i("alertify-form")||e,"string"==typeof c.placeholder&&""!==c.placeholder&&(f.value=c.placeholder),t&&this.setFocus(),this.addListeners(c.callback)},unbind:function(t,e,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)}},{alert:function(t,e,i){return m.dialog(t,"alert",e,"",i),this},confirm:function(t,e,i){return m.dialog(t,"confirm",e,"",i),this},extend:m.extend,init:m.init,log:function(t,e,i){return m.log(t,e,i),this},prompt:function(t,e,i,a){return m.dialog(t,"prompt",e,i,a),this},success:function(t,e){return m.log(t,"success",e),this},error:function(t,e){return m.log(t,"error",e),this},set:function(t){m.set(t)},labels:m.labels,debug:m.handleErrors}},"function"==typeof define?define([],function(){return new i}):"undefined"==typeof t.alertify&&(t.alertify=new i)}(this),function(t,e){function i(e,i){var n,r,s,o=e.nodeName.toLowerCase();return"area"===o?(n=e.parentNode,r=n.name,e.href&&r&&"map"===n.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&a(s)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||i:i)&&a(e)}function a(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,a){return"number"==typeof i?this.each(function(){var e=this;
setTimeout(function(){t(e).focus(),a&&a.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var a,n,r=t(this[0]);r.length&&r[0]!==document;){if(a=r.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,a){return!!t.data(e,a[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var a=t.attr(e,"tabindex"),n=isNaN(a);return(n||a>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,a){function n(e,i,a,n){return t.each(r,function(){i-=parseFloat(t.css(e,"padding"+this))||0,a&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var r="Width"===a?["Left","Right"]:["Top","Bottom"],s=a.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+a]=function(i){return i===e?o["inner"+a].call(this):this.each(function(){t(this).css(s,n(this,i)+"px")})},t.fn["outer"+a]=function(e,i){return"number"!=typeof e?o["outer"+a].call(this,e):this.each(function(){t(this).css(s,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,a){var n,r=t.ui[e].prototype;for(n in a)r.plugins[n]=r.plugins[n]||[],r.plugins[n].push([i,a[n]])},call:function(t,e,i){var a,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(a=0;n.length>a;a++)t.options[n[a][0]]&&n[a][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var a=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[a]>0?!0:(e[a]=1,n=e[a]>0,e[a]=0,n)}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=a(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(r.inline?e.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var a in i)null==i[a]&&(e[a]=i[a]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var r,s="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var a,n,r;a=e.nodeName.toLowerCase(),n="div"===a||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),n),r.settings=t.extend({},i||{}),"input"===a?this._connectDatepicker(e,r):n&&this._inlineDatepicker(e,r)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var a=t(e);i.append=t([]),i.trigger=t([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,s,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var a,n,r,s=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),a=this._get(i,"showOn"),("focus"===a||"both"===a)&&e.focus(this._showDatepicker),("button"===a||"both"===a)&&(n=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:n,title:n}):n)),e[o?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,a,n,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(i=0,a=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,a=n);return a},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,i){var a=t(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),t.data(e,s,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,a,r,o){var l,c,d,u,p,h=this._dialogInst;return h||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},t.data(this._dialogInput[0],s,h)),n(h.settings,r||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+u,d/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],s,h),this},_destroyDatepicker:function(e){var i,a=t(e),n=t.data(e,s);a.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,s),"input"===i?(n.append.remove(),n.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,a,n=t(e),r=t.data(e,s);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(a=n.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,a,n=t(e),r=t.data(e,s);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(a=n.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,s)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,r){var s,o,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof a?"defaults"===a?t.extend({},t.datepicker._defaults):d?"all"===a?t.extend({},d.settings):this._get(d,a):null:(s=a||{},"string"==typeof a&&(s={},s[a]=r),d&&(this._curInst===d&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),n(d.settings,s),null!==l&&s.dateFormat!==e&&s.minDate===e&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&s.dateFormat!==e&&s.maxDate===e&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),d),this._autoSize(d),this._setDate(d,o),this._updateAlternate(d),this._updateDatepicker(d)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,a,n,r=t.datepicker._getInst(e.target),s=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),n[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,n[0]),i=t.datepicker._get(r,"onSelect"),i?(a=t.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[a,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var a,n,r=t.datepicker._getInst(i.target);return t.datepicker._get(r,"constrainInput")?(a=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!a||a.indexOf(n)>-1):e},_doKeyUp:function(e){var i,a=t.datepicker._getInst(e.target);if(a.input.val()!==a.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,t.datepicker._getFormatConfig(a)),i&&(t.datepicker._setDateFromField(a),t.datepicker._updateAlternate(a),t.datepicker._updateDatepicker(a))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,a,r,s,o,l,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),a=t.datepicker._get(i,"beforeShow"),r=a?a.apply(e,[e,i]):{},r!==!1&&(n(i.settings,r),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,s),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(e),n=a[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",s*n+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,a){var n=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(a?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-s:0,i.left-=a&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=a&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+r>c&&c>r?Math.abs(r+o):0),i},_findPos:function(e){for(var i,a=this._getInst(e),n=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,a,n,r,o=this._curInst;!o||e&&o!==t.data(e,s)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),a,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,n),i||n(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),a=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==a)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,a){var n=t(e),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,i+("M"===a?this._get(r,"showCurrentAtPos"):0),a),this._updateDatepicker(r))},_gotoToday:function(e){var i,a=t(e),n=this._getInst(a[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(a)},_selectMonthYear:function(e,i,a){var n=t(e),r=this._getInst(n[0]);r["selected"+("M"===a?"Month":"Year")]=r["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(e,i,a,n){var r,s=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",n).html(),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=a,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var a,n=t(e),r=this._getInst(n[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),a=this._get(r,"onSelect"),a?a.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,a,n,r=this._get(e,"altField");r&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),n=this.formatDate(i,a,this._getFormatConfig(e)),t(r).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,a,n){if(null==i||null==a)throw"Invalid arguments";if(a="object"==typeof a?""+a:a+"",""===a)return null;var r,s,o,l,c=0,d=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),p=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,_=-1,b=-1,v=-1,y=!1,k=function(t){var e=i.length>r+1&&i.charAt(r+1)===t;return e&&r++,e},w=function(t){var e=k(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),r=a.substring(c).match(n);if(!r)throw"Missing number at position "+c;return c+=r[0].length,parseInt(r[0],10)},D=function(i,n,r){var s=-1,o=t.map(k(i)?r:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,i){var n=i[1];return a.substr(c,n.length).toLowerCase()===n.toLowerCase()?(s=i[0],c+=n.length,!1):e}),-1!==s)return s+1;throw"Unknown name at position "+c},C=function(){if(a.charAt(c)!==i.charAt(r))throw"Unexpected literal at position "+c;c++};for(r=0;i.length>r;r++)if(y)"'"!==i.charAt(r)||k("'")?C():y=!1;else switch(i.charAt(r)){case"d":b=w("d");break;case"D":D("D",p,h);break;case"o":v=w("o");break;case"m":_=w("m");break;case"M":_=D("M",f,g);break;case"y":m=w("y");break;case"@":l=new Date(w("@")),m=l.getFullYear(),_=l.getMonth()+1,b=l.getDate();break;case"!":l=new Date((w("!")-this._ticksTo1970)/1e4),m=l.getFullYear(),_=l.getMonth()+1,b=l.getDate();break;case"'":k("'")?C():y=!0;break;default:C()}if(a.length>c&&(o=a.substr(c),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),v>-1)for(_=1,b=v;s=this._getDaysInMonth(m,_-1),!(s>=b);)_++,b-=s;if(l=this._daylightSavingAdjust(new Date(m,_-1,b)),l.getFullYear()!==m||l.getMonth()+1!==_||l.getDate()!==b)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var a,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},c=function(t,e,i){var a=""+e;if(l(t))for(;i>a.length;)a="0"+a;return a},d=function(t,e,i,a){return l(t)?a[e]:i[e]},u="",p=!1;if(e)for(a=0;t.length>a;a++)if(p)"'"!==t.charAt(a)||l("'")?u+=t.charAt(a):p=!1;else switch(t.charAt(a)){case"d":u+=c("d",e.getDate(),2);break;case"D":u+=d("D",e.getDay(),n,r);break;case"o":u+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",e.getMonth()+1,2);break;case"M":u+=d("M",e.getMonth(),s,o);break;case"y":u+=l("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":p=!0;break;default:u+=t.charAt(a)}return u},_possibleChars:function(t){var e,i="",a=!1,n=function(i){var a=t.length>e+1&&t.charAt(e+1)===i;return a&&e++,a};for(e=0;t.length>e;e++)if(a)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):a=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":a=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),r=n,s=this._getFormatConfig(t);try{r=this.parseDate(i,a,s)||n}catch(o){a=e?"":a}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=a?r.getDate():0,t.currentMonth=a?r.getMonth():0,t.currentYear=a?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,a){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(a){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=n.getFullYear(),s=n.getMonth(),o=n.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":o+=parseInt(c[1],10);break;case"w":case"W":o+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s))}c=l.exec(i)}return new Date(r,s,o)},s=null==i||""===i?a:"string"==typeof i?r(i):"number"==typeof i?isNaN(i)?a:n(i):new Date(i.getTime());return s=s&&"Invalid Date"==""+s?a:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var a=!e,n=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),n===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(a?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(a,-i,"M")},next:function(){t.datepicker._adjustDate(a,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(a)},selectDay:function(){return t.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(a,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,a,n,r,s,o,l,c,d,u,p,h,f,g,m,_,b,v,y,k,w,D,C,x,I,M,S,T,N,E,F,A,P,O,z,R,j,Y,L=new Date,W=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),B=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),K=this._get(t,"hideIfNoPrevNext"),q=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),Q=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),$=t.drawMonth-V,te=t.drawYear;if(0>$&&($+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Z&&Z>e?Z:e;this._daylightSavingAdjust(new Date(te,$,1))>e;)$--,0>$&&($=11,te--);for(t.drawMonth=$,t.drawYear=te,i=this._get(t,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(te,$-X,1)),this._getFormatConfig(t)):i,a=this._canAdjustMonth(t,-1,te,$)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":K?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(te,$+X,1)),this._getFormatConfig(t)):n,r=this._canAdjustMonth(t,1,te,$)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":K?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",s=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?G:W,s=q?this.formatDate(s,o,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(B?"":l)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(t,"showWeek"),p=this._get(t,"dayNames"),h=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),v=this._getDefaultDate(t),y="",w=0;U[0]>w;w++){for(D="",this.maxRows=4,C=0;U[1]>C;C++){if(x=this._daylightSavingAdjust(new Date(te,$,t.selectedDay)),I=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:M+=" ui-datepicker-group-first",I=" ui-corner-"+(B?"right":"left");break;case U[1]-1:M+=" ui-datepicker-group-last",I=" ui-corner-"+(B?"left":"right");break;default:M+=" ui-datepicker-group-middle",I=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===w?B?r:a:"")+(/all|right/.test(I)&&0===w?B?a:r:"")+this._generateMonthYearHeader(t,$,te,Z,J,w>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",k=0;7>k;k++)T=(k+d)%7,S+="<th"+((k+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[T]+"'>"+h[T]+"</span></th>";for(M+=S+"</tr></thead><tbody>",N=this._getDaysInMonth(te,$),te===t.selectedYear&&$===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,N)),E=(this._getFirstDayOfMonth(te,$)-d+7)%7,F=Math.ceil((E+N)/7),A=Q&&this.maxRows>F?this.maxRows:F,this.maxRows=A,P=this._daylightSavingAdjust(new Date(te,$,1-E)),O=0;A>O;O++){for(M+="<tr>",z=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(P)+"</td>":"",k=0;7>k;k++)R=m?m.apply(t.input?t.input[0]:null,[P]):[!0,""],j=P.getMonth()!==$,Y=j&&!b||!R[0]||Z&&Z>P||J&&P>J,z+="<td class='"+((k+d+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(P.getTime()===x.getTime()&&$===t.selectedMonth&&t._keyEvent||v.getTime()===P.getTime()&&v.getTime()===x.getTime()?" "+this._dayOverClass:"")+(Y?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!_?"":" "+R[1]+(P.getTime()===G.getTime()?" "+this._currentClass:"")+(P.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(j&&!_||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(Y?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(j&&!_?"&#xa0;":Y?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===W.getTime()?" ui-state-highlight":"")+(P.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);
M+=z+"</tr>"}$++,$>11&&($=0,te++),M+="</tbody></table>"+(Q?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),D+=M}y+=D}return y+=c,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,a,n,r,s,o){var l,c,d,u,p,h,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",y="";if(r||!m)y+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=a&&a.getFullYear()===i,c=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=a.getMonth())&&(!c||n.getMonth()>=d)&&(y+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+o[d]+"</option>");y+="</select>"}if(b||(v+=y+(!r&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!_)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),p=(new Date).getFullYear(),h=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?p+parseInt(t,10):parseInt(t,10);return isNaN(e)?p:e},f=h(u[0]),g=Math.max(f,h(u[1]||"")),f=a?Math.max(f,a.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),b&&(v+=(!r&&m&&_?"":"&#xa0;")+y),v+="</div>"},_adjustInstDate:function(t,e,i){var a=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(a,n))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(a,n,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return a&&n>a?a:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,a){var n=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,a+(0>e?e:n[0]*n[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,a,n=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,o=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),a=(new Date).getFullYear(),s=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!n||e.getTime()>=n.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!o||o>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,a){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(a,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(jQuery),function(t,e){e.dis=new WebSocketRails(e.location.host+"/websocket"),e.privateChannel=dis.subscribe(t(".userinfo h5").html()),dis.on_open=function(t){console.log("Connection has been established: ",t)},privateChannel.bind("order_detail",function(e){var i=""!==e.order.adult_names?e.order.adult_names.split(";"):[],a=""!==e.order.children_names?e.order.children_names.split(";"):[],n=""!==e.order.infant_names?e.order.infant_names.split(";"):[],r=["Morning","Mid day","Afternoon","Evening"],s=["By money at office","By credit card"];t(".customer_id").html(e.customer.id),t(".customer_group").html(e.customer.group_id),t(".customer_name").html(e.customer.name),t(".customer_phone").html(e.customer.phone),t(".customer_email").html(e.customer.email),t(".order_from").html(e.order.from),t(".order_to").html(e.order.to),t(".order_depart").html(e.order.depart_date+" - "+r[e.order.depart_time_slot]),t(".order_return").html(e.order.return_date+" - "+r[e.order.return_time_slot]||"&nbsp;"),t(".payment_method").html(s[e.order.payment_method]),t(".order_adult_tickets").html(i.length+" adult ticket(s): </br>"+i.join("</br>")),t(".order_children_tickets").html(a.length+" children ticket(s): </br>"+a.join("</br>")),t(".order_infant_tickets").html(n.length+" infant ticket(s): </br>"+n.join("</br>")),t.magnificPopup.open({items:{src:".order-detail",type:"inline"},callbacks:{beforeClose:function(){}}})}),privateChannel.bind("order_filtered",function(e){var i,a,n=t(".footable").data("footable"),r=["<span class='order_status new'>NEW</span>","<span class='order_status viewed'>VIEWED</span>","<span class='order_status sent-email'>SENT EMAIL</span>","<span class='order_status sent-tickets'>SENT TICKETS</span>"];for(t(".footable tbody tr").remove(),i=0,a=e.length;a>i;i++)!function(i){var a=t('<tr class="order_id_'+e[i].id+'"><td>'+e[i].from+"</td><td>"+e[i].to+"</td><td>"+e[i].depart_date+"</td><td>"+(e[i].return_date||"&nbsp;")+"</td><td>"+new Date(e[i].created_at).toLocaleString()+"</td><td>"+r[e[i].status]+'</td><td><button class="view-order view-order btn btn-primary btn-sm"href="#" data-order_id="'+e[i].id+'">View order</button></td><td><button class="preview-email btn btn-primary btn-sm"href="#" data-order_id="'+e[i].id+'">Preview email</button></td><td><button class="send-ticket btn btn-primary btn-sm"href="#" data-order_id="'+e[i].id+'">Send ticket</button></td><td>');n.appendRow(a)}(i)}),t("#start").datepicker({dateFormat:"dd/mm/yy"}),t("#end").datepicker({dateFormat:"dd/mm/yy"}),t(".get-data").click(function(){var e=t("#start").val(),i=t("#end").val(),a=t("#status").val();window.dis.trigger("get_filtered_order_data",{start_time:""===e?null:e,end_time:""===i?null:i,status:""===a?null:a})})}(jQuery,window),function(t,e){e.orderEmp=dis.subscribe("orders_management_emp"),t("tbody").on("click",".view-order",function(t){var e={order_id:t.currentTarget.getAttribute("data-order_id")};return window.dis.trigger("view_order",e),!1}),t("tbody").on("click",".preview-email",function(t){var e={order_id:t.currentTarget.getAttribute("data-order_id")};return window.dis.trigger("preview_email",e),!1}),t("tbody").on("click",".send-ticket",function(t){var e={order_id:t.currentTarget.getAttribute("data-order_id")};return alertify.confirm("Has customer already get tickets? System will delete this row.",function(t){t?window.dis.trigger("send_ticket",e):alertify.error("Cancel action send tickets!","",0)}),!1}),privateChannel.bind("order_customer_preview_email",function(e){var i=e.order,a=(e.customer,""),n="",r="";a=i.adult_names.split(";").map(function(t){return"<p> Mr(s) "+t+"</p>"}).join(""),""!==i.children_names&&(n=i.children_names.split(";").map(function(t){return"<p> Child's name: "+t+"</p>"}).join("")),""!==i.infant_names&&(r=i.infant_names.split(";").map(function(t){return"<p> Infant's name: "+t+"</p>"}).join("")),t(".email_order_id").html(i.id),t(".email_customer_name").html(a+n+r),t(".email_order_created_at").html(new Date(i.created_at).toLocaleString()),t(".email_from").html(i.from),t(".email_to").html(i.to),t(".email_depart").html(i.depart_date),t(".email_return").html(i.return_date),t.magnificPopup.open({items:{src:".preview-email-wrap",type:"inline"}})}),privateChannel.bind("order_customer_send_email",function(){alertify.success("Send email successful!")}),privateChannel.bind("order_customer_send_tickets",function(){alertify.success("Send tickets successful!")}),orderEmp.bind("order_other_emp_view_order",function(e){var i=t(".order_id_"+e.id+" .order_status");i.removeClass().addClass("order_status viewed").html("VIEWED")}),orderEmp.bind("order_other_emp_send_email",function(e){var i=t(".order_id_"+e.id+" .order_status");i.removeClass().addClass("order_status sent-email").html("SENT EMAIL")}),orderEmp.bind("order_other_emp_send_ticket",function(e){var i=t(".order_id_"+e.id+" .order_status");i.removeClass().addClass("order_status sent-tickets").html("SENT TICKETS")}),orderEmp.bind("new_request",function(e){var i,a=t("table").data("footable"),n=["<span class='order_status new'>NEW</span>","<span class='order_status view-order'>VIEW ORDER</span>","<span class='order_status sent-email'>SENT EMAIL</span>","<span class='order_status sent-tickets'>SENT TICKETS</span>"];i=t("<tr><td>"+e.order.from+"</td><td>"+e.order.to+"</td><td>"+e.order.depart_date+"</td><td>"+(e.order.return_date||"&nbsp;")+"</td><td>"+new Date(e.order.created_at).toLocaleString()+"</td><td>"+n[e.order.status]+'</td><td><button class="view-order view-order btn btn-primary btn-sm"href="#" data-order_id="'+e.order.id+'">View order</button></td><td><button class="send-email btn btn-primary btn-sm" href="#" data-order_id="'+e.order.id+'">Send email</button></td><td><button class="send-ticket btn btn-primary btn-sm" href="#" data-order_id="'+e.order.id+'">Send ticket</button></td><td>'),a.appendRow(i)}),t(".footable").bind("footable_breakpoint",function(){t(".footable").trigger("footable_expand_first_row")}).footable()}(jQuery,window);